<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, user-scalable=no, initial-scale=1.0, maximum-scale=1.0, minimum-scale=1.0">
    <title>Portfolio</title>
    <meta name="description" content="作品集管理系统">
    <!-- LeanCloud -->
    <script src="https://cdn1.lncld.net/static/js/av-min-1.2.1.js"></script>

    <!-- Bootstrap -->
    <!-- Latest compiled and minified CSS -->
    <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/css/bootstrap.min.css" integrity="sha384-BVYiiSIFeK1dGmJRAkycuHAHRg32OmUcww7on3RYdg4Va+PmSTsz/K68vbdEjh4u" crossorigin="anonymous">
    <!-- Latest compiled and minified JavaScript -->
    <script src="https://apps.bdimg.com/libs/jquery/2.1.4/jquery.min.js"></script>
    <script src="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/js/bootstrap.min.js" integrity="sha384-Tc5IQib027qvyjSMfHjOMaLkfuWVxZxUPnCJA7l2mCWNIpG9mGCD8wGNIcPD7Txa" crossorigin="anonymous"></script>

    <!-- Custom styles for this template -->
    <link href="./../header.css" rel="stylesheet">
    <link href="./../style.css" rel="stylesheet">
    <script type="text/javascript" src="./../initLeanCloud.js"></script>
    <script type="text/javascript" src="./../reuseMethods.js"></script>
    <script type="text/javascript" src="new-product.js"></script>

    <style type="text/css">  
     body{display: block;}
      .upload{text-align:center;background: #f2f2f2;position: relative;}
      .upload:hover{background:#21292f;color:#ffffff; }
      .upload input{opacity:0;position: absolute;top: -1px;left: -1px;width: 100%;}
    </style>
  </head>
  <body>
    <div class="login-page">
      <div class="container">

        <form class="form-signin">
          <h2 class="card-title">发布一个新商品</h2>
          <div class="form-group">
            <label for="product-title" class="form-label">商品名称</label>
            <input type="title" id="inputTitle" class="form-control" placeholder="商品名称" required autofocus>
          </div>

          <div class="form-group">
            <label for="inputPrice" class="form-label">价格</label>
            <input type="price" id="inputPrice" class="form-control" placeholder="价格" required>
          </div>

          <div class="form-group">
            <label for="inputDescription" class="form-label">商品描述</label>
            <textarea type="description" id="inputDescription" class="form-control" placeholder="商品描述" required></textarea>
          </div>

          <div class="form-group">
            <label for="inputFile" class="form-label">上传图片</label>
                <div class="upload imgLog3">
                  <span><i class="glyphicon glyphicon-open"></i> 选择图片</span>   
                </div>
            <!-- <input type="file" id="inputFile" class="form-control" placeholder="文件" required> -->
          </div>

          <button class="btn btn-lg btn-primary btn-block" type="submit">Create</button>
        </form>

      </div> <!-- /container -->
    </div>

  <script>
      function ImgUpload(node,width,height,linHeight){
        var _this = this;
        this._node = node;
        this.width = width + '%';
        this.height = height + 'px';
        this.linHeight = linHeight + 'px';
        this.setCss();
        this.createFile();
      }

      ImgUpload.prototype.createFile = function(){
        $(this._node).append('<input type="file" id="inputFile" placeholder="文件" required>')
      }

      ImgUpload.prototype.setCss = function(){
          $(this._node).css({
            "width":this.width,
            "height":this.height,
            "line-height":this.linHeight,
          })
      }

      ImgUpload.prototype.setSpan = function(_this){
        $(_this).siblings().css("opacity",0);
      }

          
          $(function(){
            var img3 = new ImgUpload('.imgLog3',100,200,200);

                  $(document).on('change',".imgLog3 input",function(e){
                //模拟后台返回url
                var url = window.URL.createObjectURL(e.target.files[0]);
                $(this).parent().css('background','url('+url+')0% 0% / cover')
                      
                img3.setSpan(this)
            })            

          })

  </script>
  </body>
</html>
